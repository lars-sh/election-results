<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../jacoco-resources/report.gif" type="image/gif"/><title>LocalNomination.java</title><link rel="stylesheet" href="../../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../../index.html" class="el_report">Election Results CLI</a> &gt; <a href="../index.html" class="el_bundle">election-results-core</a> &gt; <a href="index.source.html" class="el_package">de.larssh.election.germany.schleswigholstein.local</a> &gt; <span class="el_source">LocalNomination.java</span></div><h1>LocalNomination.java</h1><pre class="source lang-java linenums">// Generated by delombok at Mon Jan 30 16:29:34 UTC 2023
package de.larssh.election.germany.schleswigholstein.local;

import static de.larssh.utils.Finals.lazy;
import java.util.Comparator;
import java.util.Optional;
import java.util.function.Supplier;
import com.fasterxml.jackson.annotation.JsonIgnore;
import com.fasterxml.jackson.annotation.JsonProperty;
import de.larssh.election.germany.schleswigholstein.Keys;
import de.larssh.election.germany.schleswigholstein.Nomination;
import de.larssh.election.germany.schleswigholstein.Party;
import de.larssh.election.germany.schleswigholstein.Person;
import de.larssh.utils.Optionals;
import de.larssh.utils.annotations.PackagePrivate;
import edu.umd.cs.findbugs.annotations.Nullable;
import edu.umd.cs.findbugs.annotations.SuppressFBWarnings;

/**
 * Wahlvorschlag (§ 18 GKWG)
 */
public class LocalNomination implements Nomination&lt;LocalNomination&gt;, Comparable&lt;LocalNomination&gt; {
	/**
	 * Comparator by election, party and nomination order
	 */
<span class="fc" id="L26">	private static final Comparator&lt;LocalNomination&gt; COMPARATOR = Comparator.comparing(LocalNomination::getElection).thenComparing(LocalNomination::getParty, Optionals.&lt;Party&gt;comparator()).thenComparing(nomination -&gt; nomination.getElection().getNominationsAsList().indexOf(nomination));</span>

	/**
	 * Creates a unique key for the given person and party keys.
	 *
	 * @param personKey the key of a person
	 * @param partyKey  the key of a party
	 * @return unique key for the given person and party keys
	 */
	@PackagePrivate
	static String createKey(final String personKey, final Optional&lt;String&gt; partyKey) {
<span class="fc" id="L37">		return Keys.escape(personKey, &quot; (&quot;, partyKey.orElse(&quot;&quot;), &quot;)&quot;);</span>
	}

	/**
	 * Wahl
	 */
	@JsonIgnore
	private final LocalElection election;
	/**
	 * Wahlkreis
	 */
	private final LocalDistrict district;
	/**
	 * Politische Partei, Wählergruppe oder empty für unabhängige Bewerberinnen und
	 * Bewerber
	 */
	private final Optional&lt;Party&gt; party;
	/**
	 * Bewerberin oder Bewerber
	 */
	private final Person person;
	/**
	 * Art des Wahlvorschlags (§ 18 Absätze 1+2 GKWG)
	 */
	@JsonIgnore
<span class="pc bpc" id="L62" title="1 of 4 branches missed.">	private final Supplier&lt;LocalNominationType&gt; type = lazy(() -&gt; !getParty().isPresent() || getElection().getNominations(getParty().get()).stream().limit(getElection().getNumberOfDirectSeats()).anyMatch(this::equals) ? LocalNominationType.DIRECT : LocalNominationType.LIST);</span>

	/**
	 * {@inheritDoc}
	 */
	@Override
	public int compareTo(@Nullable final LocalNomination nomination) {
<span class="fc" id="L69">		return COMPARATOR.compare(this, nomination);</span>
	}

	/**
	 * District as JSON property
	 *
	 * @return Wahlkreis
	 */
	@JsonProperty(&quot;district&quot;)
	@SuppressWarnings(&quot;PMD.UnusedPrivateMethod&quot;)
	@SuppressFBWarnings(value = &quot;UPM_UNCALLED_PRIVATE_METHOD&quot;, justification = &quot;JSON property&quot;)
	private String getDistrictForJackson() {
<span class="fc" id="L81">		return getDistrict().getKey();</span>
	}

	/**
	 * Creates a unique key based on the person and party.
	 *
	 * @return unique key based on the person and party
	 */
	@JsonIgnore
	public String getKey() {
<span class="fc" id="L91">		return createKey(getPerson().getKey(), getParty().map(Party::getKey));</span>
	}

	/**
	 * Party as JSON property
	 *
	 * @return Politische Partei, Wählergruppe oder empty
	 */
	@JsonProperty(&quot;party&quot;)
	@SuppressWarnings(&quot;PMD.UnusedPrivateMethod&quot;)
	@SuppressFBWarnings(value = &quot;UPM_UNCALLED_PRIVATE_METHOD&quot;, justification = &quot;JSON property&quot;)
	private Optional&lt;String&gt; getPartyForJackson() {
<span class="fc" id="L103">		return getParty().map(Party::getKey);</span>
	}

	/**
	 * Art des Wahlvorschlags (§ 18 Absätze 1+2 GKWG)
	 *
	 * @return Art des Wahlvorschlags
	 */
	public LocalNominationType getType() {
<span class="fc" id="L112">		return type.get();</span>
	}

	/**
	 * Wahl
	 *
	 * @return Wahl
	 */
	@java.lang.SuppressWarnings(&quot;all&quot;)
	@edu.umd.cs.findbugs.annotations.SuppressFBWarnings(justification = &quot;generated code&quot;)
	@lombok.Generated
	public LocalElection getElection() {
		return this.election;
	}

	/**
	 * Wahlkreis
	 *
	 * @return Wahlkreis
	 */
	@java.lang.SuppressWarnings(&quot;all&quot;)
	@edu.umd.cs.findbugs.annotations.SuppressFBWarnings(justification = &quot;generated code&quot;)
	@lombok.Generated
	public LocalDistrict getDistrict() {
		return this.district;
	}

	/**
	 * Politische Partei, Wählergruppe oder empty für unabhängige Bewerberinnen und
	 * Bewerber
	 *
	 * @return Politische Partei, Wählergruppe oder empty
	 */
	@java.lang.SuppressWarnings(&quot;all&quot;)
	@edu.umd.cs.findbugs.annotations.SuppressFBWarnings(justification = &quot;generated code&quot;)
	@lombok.Generated
	public Optional&lt;Party&gt; getParty() {
		return this.party;
	}

	/**
	 * Bewerberin oder Bewerber
	 *
	 * @return Bewerberin oder Bewerber
	 */
	@java.lang.SuppressWarnings(&quot;all&quot;)
	@edu.umd.cs.findbugs.annotations.SuppressFBWarnings(justification = &quot;generated code&quot;)
	@lombok.Generated
	public Person getPerson() {
		return this.person;
	}

	@edu.umd.cs.findbugs.annotations.NonNull
	@java.lang.Override
	@java.lang.SuppressWarnings(&quot;all&quot;)
	@edu.umd.cs.findbugs.annotations.SuppressFBWarnings(justification = &quot;generated code&quot;)
	@lombok.Generated
	public java.lang.String toString() {
		return &quot;LocalNomination(district=&quot; + this.getDistrict() + &quot;, party=&quot; + this.getParty() + &quot;, person=&quot; + this.getPerson() + &quot;, type=&quot; + this.getType() + &quot;)&quot;;
	}

	@java.lang.Override
	@java.lang.SuppressWarnings(&quot;all&quot;)
	@edu.umd.cs.findbugs.annotations.SuppressFBWarnings(justification = &quot;generated code&quot;)
	@lombok.Generated
	public boolean equals(@edu.umd.cs.findbugs.annotations.Nullable final java.lang.Object o) {
		if (o == this) return true;
		if (!(o instanceof LocalNomination)) return false;
		final LocalNomination other = (LocalNomination) o;
		if (!other.canEqual((java.lang.Object) this)) return false;
		final java.lang.Object this$district = this.getDistrict();
		final java.lang.Object other$district = other.getDistrict();
		if (this$district == null ? other$district != null : !this$district.equals(other$district)) return false;
		final java.lang.Object this$party = this.getParty();
		final java.lang.Object other$party = other.getParty();
		if (this$party == null ? other$party != null : !this$party.equals(other$party)) return false;
		final java.lang.Object this$person = this.getPerson();
		final java.lang.Object other$person = other.getPerson();
		if (this$person == null ? other$person != null : !this$person.equals(other$person)) return false;
		return true;
	}

	@java.lang.SuppressWarnings(&quot;all&quot;)
	@edu.umd.cs.findbugs.annotations.SuppressFBWarnings(justification = &quot;generated code&quot;)
	@lombok.Generated
	protected boolean canEqual(@edu.umd.cs.findbugs.annotations.Nullable final java.lang.Object other) {
		return other instanceof LocalNomination;
	}

	@java.lang.Override
	@java.lang.SuppressWarnings(&quot;all&quot;)
	@edu.umd.cs.findbugs.annotations.SuppressFBWarnings(justification = &quot;generated code&quot;)
	@lombok.Generated
	public int hashCode() {
		final int PRIME = 59;
		int result = 1;
		final java.lang.Object $district = this.getDistrict();
		result = result * PRIME + ($district == null ? 43 : $district.hashCode());
		final java.lang.Object $party = this.getParty();
		result = result * PRIME + ($party == null ? 43 : $party.hashCode());
		final java.lang.Object $person = this.getPerson();
		result = result * PRIME + ($person == null ? 43 : $person.hashCode());
		return result;
	}

	@java.lang.SuppressWarnings(&quot;all&quot;)
	@edu.umd.cs.findbugs.annotations.SuppressFBWarnings(justification = &quot;generated code&quot;)
	@lombok.Generated
	LocalNomination(final LocalElection election, final LocalDistrict district, final Optional&lt;Party&gt; party, final Person person) {
		this.election = election;
		this.district = district;
		this.party = party;
		this.person = person;
	}
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>