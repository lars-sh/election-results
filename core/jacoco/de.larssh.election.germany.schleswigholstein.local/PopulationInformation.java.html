<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>PopulationInformation.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Election Results Core</a> &gt; <a href="index.source.html" class="el_package">de.larssh.election.germany.schleswigholstein.local</a> &gt; <span class="el_source">PopulationInformation.java</span></div><h1>PopulationInformation.java</h1><pre class="source lang-java linenums">// Generated by delombok at Thu Feb 23 20:49:16 UTC 2023
package de.larssh.election.germany.schleswigholstein.local;

import static java.util.Collections.emptyNavigableMap;
import java.util.Map;
import java.util.Map.Entry;
import java.util.NavigableMap;
import java.util.TreeMap;
import de.larssh.election.germany.schleswigholstein.ElectionException;
import de.larssh.utils.collection.Maps;

/**
 * Singletons mit Information zu Arten von Wahlgebieten in Abhängigkeit zu ihrer
 * Einwohnerzahl
 */
public class PopulationInformation {
	/**
	 * Singletons mit Information zu Arten von Wahlgebieten in Abhängigkeit zu ihrer
	 * Einwohnerzahl
	 */
<span class="fc" id="L21">	private static final Map&lt;LocalDistrictType, PopulationInformation&gt; INSTANCES = Maps.&lt;LocalDistrictType, PopulationInformation&gt;builder().put(LocalDistrictType.KREIS, createKreis()).put(LocalDistrictType.KREISFREIE_STADT, createKreisfreieStadt()).put(LocalDistrictType.KREISANGEHOERIGE_GEMEINDE, createKreisangehoerigeGemeinde()).unmodifiable();</span>

	/**
	 * siehe § 8 Absatz 3 GKWG und § 9 Absatz 3 GKWG
	 *
	 * @return the corresponding population information
	 */
	@SuppressWarnings(&quot;checkstyle:MagicNumber&quot;)
	private static PopulationInformation createKreis() {
<span class="fc" id="L30">		return new PopulationInformation(LocalDistrictType.KREIS, emptyNavigableMap(), (NavigableMap&lt;Integer, Integer&gt;)  //</span>
<span class="fc" id="L31">		Maps.builder(new TreeMap&lt;Integer, Integer&gt;()).put(0, 23).put(200000, 25).get());</span>
	}

	/**
	 * siehe § 8 Absatz 1 GKWG und § 9 Absätze 1-2 GKWG
	 *
	 * @return the corresponding population information
	 */
	@SuppressWarnings(&quot;checkstyle:MagicNumber&quot;)
	private static PopulationInformation createKreisangehoerigeGemeinde() {
<span class="fc" id="L41">		return new PopulationInformation(LocalDistrictType.KREIS, (NavigableMap&lt;Integer, Integer&gt;)  //</span>
<span class="fc" id="L42">		Maps.builder(new TreeMap&lt;Integer, Integer&gt;()).put(2500, 1).put(5000, 2).put(10000, 3).get(), (NavigableMap&lt;Integer, Integer&gt;)  //</span>
<span class="fc" id="L43">		Maps.builder(new TreeMap&lt;Integer, Integer&gt;()).put(70, 4).put(200, 5).put(750, 6).put(1250, 7).put(2500, 9).put(5000, 10).put(10000, 12).put(15000, 14).put(25000, 16).put(35000, 18).put(45000, 20).get());</span>
	}

	/**
	 * siehe § 8 Absatz 2 GKWG und § 9 Absatz 3 GKWG
	 *
	 * @return the corresponding population information
	 */
	@SuppressWarnings(&quot;checkstyle:MagicNumber&quot;)
	private static PopulationInformation createKreisfreieStadt() {
<span class="fc" id="L53">		return new PopulationInformation(LocalDistrictType.KREISFREIE_STADT, emptyNavigableMap(), (NavigableMap&lt;Integer, Integer&gt;)  //</span>
<span class="fc" id="L54">		Maps.builder(new TreeMap&lt;Integer, Integer&gt;()).put(0, 22).put(150000, 25).get());</span>
	}

	/**
	 * Information zur Art des Wahlgebiets in Abhängigkeit zur Einwohnerzahl
	 *
	 * @param type Art des Wahlgebiets
	 * @return Information in Abhängigkeit zur Einwohnerzahl
	 */
	public static PopulationInformation get(final LocalDistrictType type) {
<span class="fc" id="L64">		return INSTANCES.get(type);</span>
	}

	/**
	 * Art des Wahlgebiets
	 */
	private final LocalDistrictType type;
	/**
	 * Anzahl der Wahlkreise nach maximaler Einwohnerzahl (§ 9 Absätze 1-3 GKWG)
	 *
	 * &lt;p&gt;
	 * Bei mehr Einwohnern gilt {@link #numberOfDirectSeatsIfPopulationIsGreater}.
	 */
	private final NavigableMap&lt;Integer, Integer&gt; numberOfDistrictsIfPopulationIsLessOrEqual;
	/**
	 * Anzahl der unmittelbaren Vertreterinnen und Vertreter nach minimaler
	 * Einwohnerzahl (§ 8 GKWG)
	 */
	private final NavigableMap&lt;Integer, Integer&gt; numberOfDirectSeatsIfPopulationIsGreater;

	/**
	 * Anzahl der Wahlkreise (§ 9 Absätze 1-3 GKWG)
	 *
	 * @param population Einwohnerzahl
	 * @return Anzahl der Wahlkreise
	 */
	public int getNumberOfDistricts(final int population) {
<span class="fc" id="L91">		final Entry&lt;Integer, Integer&gt; entry = numberOfDistrictsIfPopulationIsLessOrEqual.higherEntry(population);</span>
<span class="pc bpc" id="L92" title="1 of 2 branches missed.">		return entry == null ? getNumberOfDirectSeats(population) : entry.getValue();</span>
	}

	/**
	 * Anzahl der Vertreterinnen und Vertreter (§ 8 GKWG)
	 *
	 * @param population Einwohnerzahl
	 * @return Zahl der unmittelbaren Vertreterinnen und Vertreter
	 */
	public int getNumberOfDirectSeats(final int population) {
<span class="fc" id="L102">		final Entry&lt;Integer, Integer&gt; entry = numberOfDirectSeatsIfPopulationIsGreater.lowerEntry(population);</span>
<span class="pc bpc" id="L103" title="1 of 2 branches missed.">		if (entry == null) {</span>
<span class="nc" id="L104">			throw new ElectionException(&quot;Population %d is too low to calculate the number of direct seats for. Increase population to %d to calculate the number of direct seats.&quot;, population, numberOfDirectSeatsIfPopulationIsGreater.firstKey());</span>
		}
<span class="fc" id="L106">		return entry.getValue();</span>
	}

	@java.lang.SuppressWarnings(&quot;all&quot;)
	@edu.umd.cs.findbugs.annotations.SuppressFBWarnings(justification = &quot;generated code&quot;)
	@lombok.Generated
	public PopulationInformation(final LocalDistrictType type, final NavigableMap&lt;Integer, Integer&gt; numberOfDistrictsIfPopulationIsLessOrEqual, final NavigableMap&lt;Integer, Integer&gt; numberOfDirectSeatsIfPopulationIsGreater) {
		this.type = type;
		this.numberOfDistrictsIfPopulationIsLessOrEqual = numberOfDistrictsIfPopulationIsLessOrEqual;
		this.numberOfDirectSeatsIfPopulationIsGreater = numberOfDirectSeatsIfPopulationIsGreater;
	}

	/**
	 * Art des Wahlgebiets
	 *
	 * @return Art des Wahlgebiets
	 */
	@java.lang.SuppressWarnings(&quot;all&quot;)
	@edu.umd.cs.findbugs.annotations.SuppressFBWarnings(justification = &quot;generated code&quot;)
	@lombok.Generated
	public LocalDistrictType getType() {
		return this.type;
	}
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>